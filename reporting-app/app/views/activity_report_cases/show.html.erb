<%
    name = Faker::Name.name
    content_for :title, name
%>
<main class="usa-section">
  <div class="grid-container">
    <nav class="usa-breadcrumb" aria-label="Breadcrumbs">
      <ol class="usa-breadcrumb__list">
        <li class="usa-breadcrumb__list-item">
          <%= link_to "Tasks", tasks_path %>
        </li>
        <li class="usa-breadcrumb__list-item usa-current" aria-current="page">
          <%= name %>
        </li>
      </ol>
    </nav>
    <div class="grid-row margin-bottom-2">
      <div class="grid-col">
        <h1 class="usa-heading-xl margin-bottom-1">
          <%= yield :title %>
        </h1>
        <p>
          Date Created: <time datetime="<%= @case.created_at.strftime("%Y-%m-%d") %>"><%= @case.created_at.strftime("%m/%d/%Y") %></time>
        </p>
      </div>
      <div class="grid-col-auto">
        <p class="font-serif-md">Status: <%= render partial: "flex/cases/status_tag", locals: { status: @case.status.humanize } %></p>
      </div>
    </div>
    <div class="grid-row grid-gap border-top-2px border-base-lighter padding-top-2">
      <div class="tablet:grid-col-3 margin-bottom-4 margin-left-0 margin-right-0 tablet:margin-bottom-0">
        <nav aria-label="Side navigation,">
          <ul class="usa-sidenav">
            <li class="usa-sidenav__item">
              <%= link_to "Details", activity_report_case_path(@case, section: "details"), data: { turbo_frame: "case_summary" }, class: (params[:section] == "details" || params[:section].blank? ? "usa-current" : nil) %>
            </li>
            <li class="usa-sidenav__item">
              <%= link_to "Tasks", activity_report_case_path(@case, section: "tasks"), data: { turbo_frame: "case_summary" }, class: (params[:section] == "tasks" ? "usa-current" : nil) %>
            </li>
            <li class="usa-sidenav__item">
              <%= link_to "Documents", activity_report_case_path(@case, section: "documents"), data: { turbo_frame: "case_summary" }, class: (params[:section] == "documents" ? "usa-current" : nil) %>
            </li>
            <li class="usa-sidenav__item">
              <%= link_to "Notes", activity_report_case_path(@case, section: "notes"), data: { turbo_frame: "case_summary" }, class: (params[:section] == "notes" ? "usa-current" : nil) %>
            </li>
          </ul>
        </nav>
      </div>
      <div class="tablet:grid-col-9">
        <turbo-frame id="case_summary">
          <%= render "activity_report_cases/case_summary", case: @case, section: params[:section] %>
        </turbo-frame>
        <%= yield :case_details %>
      </div>
    </div>
  </div>
</main>
