<% content_for :title, t(".title") %>

<h1><%= t(".title") %></h1>

<% if @activity.supporting_documents.attached? %>
  <div class="usa-form-group">
    <label class="usa-label"><%= t(".uploaded_documents") %></label>
    <ul class="usa-list">
      <% @activity.supporting_documents.each do |document| %>
        <li>
          <%= link_to document.filename, rails_blob_path(document, disposition: "attachment"), 
              target: "_blank", class: "usa-link" %>
          (<%= number_to_human_size(document.byte_size) %>)
        </li>
      <% end %>
    </ul>
  </div>
<% end %>

<%= flex_form_with(
  model: [@activity_report_application_form, @activity],
  url: upload_documents_activity_report_application_form_activity_path(@activity_report_application_form, @activity),
  method: :post) do |f| %>

  <% @activity.supporting_documents.each do |document| %>
    <%= f.hidden_field :supporting_documents, multiple: true, value: document.signed_id %>
  <% end %>

  <%= f.file_field :supporting_documents, label: t(".upload_document_label"), multiple: true %>
  
  <%= f.submit t(".upload") %>
<% end %>

<%= link_to t(".continue"), @activity_report_application_form, class: "usa-button usa-button--outline margin-top-4" %>
